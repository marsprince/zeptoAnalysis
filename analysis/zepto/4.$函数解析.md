# $函数解析

$下主要是扩展函数，zepto内部扩展了很多常用函数

$.extend:zepto深拷贝,主要调用了下面的extend方法

```javascript
function extend(target, source, deep) {
    for (key in source)
      if (deep && (isPlainObject(source[key]) || isArray(source[key]))) { 
        if (isPlainObject(source[key]) && !isPlainObject(target[key])) //如果要合并的属性是对象，但target对应的key非对象
          target[key] = {}
        if (isArray(source[key]) && !isArray(target[key])) //如果要合并的属性是数组，但target对应的key非数组
          target[key] = []
        extend(target[key], source[key], deep) //递归
      }
      else if (source[key] !== undefined) target[key] = source[key]
  }
```

$.contains:判断父节点是否包含指定节点，如果有contains方法，调用contains，否则，从node向上循环，查找是否和父节点相等

$.type：判断类型，主要逻辑就是利用以下函数，构造一个class2type数组，然后调用toString，去数组内查找对应的类型

```javascript
$.each("Boolean Number String Function Array Date RegExp Object Error".split(" "), function(i, name) {
    class2type[ "[object " + name + "]" ] = name.toLowerCase()
  })
```

$.isFunction：调用type判断是否是函数

$.isWindow: 判断是否是window对象，调用window.window判断

$.isArray：Array.isArray || object instanceof Array

$.isPlainObject：判断对象否为纯粹的对象字面量，对于通过字面量定义的对象和new Object的对象返回true，new Object时传参数的返回false

```javascript
function isPlainObject(obj) {
    return isObject(obj) && !isWindow(obj) && Object.getPrototypeOf(obj) == Object.prototype //通过构造函数或者 {} 方式创建的对象的 prototype 属性默认为 undefined
  }
```

$.isEmptyObject:判断是否为空对象

$.isNumeric：判断传入值是否是数字，当传入值不为空且非string,Boolean非isNaN时，返回true

$.inArray：获得在数组中的索引，实际为调用indexOf

$.camelCase:将连字符式命名转化为驼峰式

$.trim：调用trim，去空格

$.map：这里主要分了两类，通过likeArray筛选出，类数组的调用循环，数组调用for in，然后传入回调筛选出返回为true的元素

$.each：同上

$.grep：调用filter过滤



