# $.fn函数解析

$.fn表现为一个数组形式，封装了很多常用的方法

forEach，reduce，push，sort，splice，indexOf:继承自array

contact:合并数组，不同与普通数组的concat，会先对arguments数组对象进行判断，如果是Z对象，会转成数组。
然后执行普通的concat

map:注意要返回$()，以保证可以一直链式调用下去。调用$.map，执行传入的fn

slice：调用数组的slice方法，返回Z对象

ready:DOM加载完成后的回调函数，主要添加DOMContentLoaded监听函数，如果已经完成，则直接调用回调函数。

get：获得指定位置的元素，传入空值，调用slice，传入负值，返回idx + this.length位置的元素，相当于倒序

toArray：直接调用get()，相当于slice，所以转化为数组

size：返回this长度

remove；将集合从dom树中移除

each：调用emptyArray.every，循环执行传入函数

filter:返回符合匹配的dom集合，如果参数为一个函数，函数返回有实际值得时候，元素才会被返回，否则调用match判断

add；将selector与现有集合连接到一起，返回新的zepto对象

is：调用zepto.matches来看第一个dom是否和selector匹配

not:和filter相反，返回不等于selector的集合，接收参数为：css选择器,function,dom,nodeList。

has:对数组中所有元素进行循环，如果是对象，则调用contains，否则调用find，返回包含输入selector的项

eq:索引选择,调用slice返回指定索引的元素

first:返回第一个元素，并将其包装为zepto对象

last:最后一个元素，同上

find:根据选择器查找指定selector对于的dom元素。如果selector不存在，返回空对象，如果selector是一个对象，遍历selector，筛选出父级为集合中记录的selector;
如果当前集合长度为1时，调用zepto.qsa，将结果转成zepto对象，否则遍历调用qsa

closest:

parents:

parent:返回parentNode，选择符合父选择器的dom集合

children:返回子元素，

contents:

siblings:

empty:将集合内元素innerHTML置空

pluck；返回集合内每个元素在指定属性上的值

show：

replaceWith:

wrap：

wrapAll：

wrapInner：

unwrap：

clone:调用cloneNode复制dom元素

hide:设置css display为None

toggle:根据参数调用show和hide

prev:调用previousElementSibling，如果传入了选择器，则调用filter选择

next:调用nextElementSibling，如果传入了选择器，则调用filter选择

html:如果传入参数不为空，返回第一个元素的innerHTML，否则，如果是字符串，直接插入到记录中，如果是函数，
则将当前记录作为上下文，调用该函数，且传入该记录的索引和原始innerHTML作为参数

text:如果传入参数为空，为获取功能，获得textContent的值;text不为空的时候，如果是函数，则执行函数，否则为所有元素设置text的值为输入值

attr:与text,html类似，attr接受两个参数，name和value，当name是字符串并且value为空时，为获得第一个元素的属性值；
当name传入object时，会把name的键值对作为属性-属性值写入，其他情况会调用funcArg执行函数，再赋予属性值。

removeAttr:循环dom数组中的每一个元素，为其设置属性值，如果传入为空，就设置空属性值

prop:如果value值为空，则获得第一个元素的属性值，如果不为空，则遍历每一个dom元素，为其设置属性值，注意这里的属性值和attr属性的不同，
attr方法调用的是setAttribute方法，prop调用的是this[name]方法，一个是html上的，一个相当于$对象上的

removeProp:调用delete删除属性

data:和attr类似，只不过为属性加上了前缀data-

val:如果输入为空，则相当于获取第一个元素下的value值（option为选中的值）；如果输入不为空，则为dom数组下所有元素设置value值

offset:传入参数为空时，如果dom为空，则返回空，如果第一个元素不是文档的根节点并且文档不包含这个元素，返回0，其余则调用getBoundingClientRect，返回第一个元素的位置；
如果传入不为空，则遍历数组中每一个元素，设置top和left值为对应的传入值减去定位父级的偏移量。如果当前position为static，设置它为relative.注意此方法获得和设置的位置均相对于文档。

css:

index:如果传入不为空，返回元素在Dom数组中的索引，如果传入为空，返回第一个元素在父元素下的所有子元素中的索引

hasClass:

addClass:

removeClass:

toggleClass:

scrollTop:

scrollLeft:

position:

offsetParent:获得元素定位父级



